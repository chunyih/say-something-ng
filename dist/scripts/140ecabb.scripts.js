"use strict";var ngyoApp=angular.module("ngyoApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"mainCtrl"}).otherwise({redirectTo:"/"})}]);ngyoApp.factory("chatData",["$resource",function(a){var b=a("../data/:id.json",{id:"@id"});return b}]),ngyoApp.factory("personList",[function(){var a=["John",["John","Tom","Amy","Clara"]];return a}]),ngyoApp.controller("mainCtrl",["$scope","chatData","personList",function(a,b,c){b.query({id:1}).$promise.then(function(b){a.chatData=b,setTimeout(function(){a.$apply(angular.element("div.chatContent p").animate({opacity:1},500)),angular.forEach(a.chatData,function(a){a.isLoad=!0})},300),console.log(b)},function(){console.log("ajax failed!!")}),a.people=c[1],a.selectedPerson=c[0],a.selectPerson=function(b,d,e){e.preventDefault(),console.log(c),c[0]=d,a.selectedPerson=c[0]}}]),ngyoApp.directive("chatForm",["$compile","personList","chatData",function(a,b){var c=function(a,c){c.on("keypress",function(c){if(13===c.which){var d,e,f,g,h=b[0];d=new Date($.now()),f=d.getSeconds()<10?"0"+d.getSeconds():d.getSeconds(),e=d.getHours()+":"+d.getMinutes()+":"+f+" "+(d.getMonth()+1)+"/"+d.getDate()+"/"+d.getFullYear(),g=a.chatInput,a.chatData.push({name:h,text:g,time:e,isLoad:!1}),a.chatInput=null,a.$apply(angular.element("input.chatInput").val("")),angular.element("div.jumbotron").scrollTop($("div.chatContent").height()),a.$apply(angular.element("div.chatContent p").last().animate({opacity:1},500)),a.chatData[a.chatData.length-1].isLoad=!0}})};return{link:c,templateUrl:"../../views/templates/chatForm.html"}}]);